cmake_minimum_required(VERSION 3.1)
file(GLOB CppFiles *.cpp)
list(REMOVE_ITEM CppFiles ZoomGraphics.cpp)
file(GLOB HeaderFiles *.h)
list(REMOVE_ITEM HeaderFiles ZoomGraphics.h)

if(Qt5_FOUND)
        list(APPEND CppFiles ZoomGraphicsView.cpp)
	list(APPEND HeaderFiles ZoomGraphicsView.h)
endif()

add_library(networkReliabilityCommon STATIC ${CppFiles} ${HeaderFiles})
target_include_directories(networkReliabilityCommon PUBLIC ${Boost_INCLUDE_DIRS})
target_include_directories(networkReliabilityCommon INTERFACE ${PROJECT_SOURCE_DIR}/networkReliabilityCommon)
target_link_libraries(networkReliabilityCommon INTERFACE ${Boost_LIBRARIES})
target_link_libraries(networkReliabilityCommon PUBLIC truncatedBinomialDistribution)
target_include_directories(networkReliabilityCommon PUBLIC ${allPointsMaxFlow_INCLUDE_DIRS})
target_compile_definitions(networkReliabilityCommon PUBLIC BOOST_ALL_NO_LIB BOOST_ALL_DYN_LINK)
if(Qt5_FOUND)
	target_link_libraries(networkReliabilityCommon PUBLIC Qt5::Core Qt5::Gui Qt5::Widgets)
endif()
if(WIN32)
	target_link_libraries(networkReliabilityCommon PUBLIC mpfr mpir)
	set_target_properties(networkReliabilityCommon PROPERTIES RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/x64/ PDB_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/x64/)
else()
	target_compile_features(networkReliabilityCommon PUBLIC cxx_rvalue_references)
endif()